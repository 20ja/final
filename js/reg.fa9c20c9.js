(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["reg"],{2532:function(e,t,a){"use strict";var i=a("23e7"),n=a("5a34"),s=a("1d80"),r=a("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(s(this)).indexOf(n(e),arguments.length>1?arguments[1]:void 0)}})},2679:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"upload"}},[a("b-container",[a("b-row",[a("b-form",{staticClass:"w-100",on:{submit:e.submit}},[e._l(e.forms,(function(t,i){return a("b-form-group",{key:i,attrs:{label:t.label,"label-for":t.id}},[a("b-form-input",{attrs:{id:t.id,type:t.type,required:""},model:{value:t.model,callback:function(a){e.$set(t,"model",a)},expression:"form.model"}})],1)})),a("b-form-group",{attrs:{label:"商品類別","label-for":"category"}},[a("b-form-select",{attrs:{id:"category",required:"",options:e.options},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1),a("b-form-group",{attrs:{label:"商品描述","label-for":"description"}},[a("b-form-textarea",{attrs:{id:"description",required:"",rows:"6","max-rows":"6"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1),a("b-form-group",{attrs:{label:"書籍封面","label-for":"name"}},[a("b-form-file",{attrs:{id:"name",required:"",accept:"image/*"},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}})],1),a("b-form-group",{attrs:{label:"書籍預覽","label-for":"preview"}},[a("b-form-file",{attrs:{id:"preview","file-name-formatter":e.formatNames,required:"",multiple:"",accept:"image/*"},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1),a("b-button",{attrs:{variant:"success",type:"submit"}},[e._v("送出")])],2)],1)],1),a("b-container",[a("b-table",{attrs:{items:e.items,fields:e.fields},scopedSlots:e._u([{key:"cell(name)",fn:function(e){return[a("img",{style:{maxWidth:"100px"},attrs:{src:e.item.name}})]}},{key:"cell(preview)",fn:function(t){return[a("b-button",{on:{click:t.toggleDetails}},[e._v("顯示內頁")])]}},{key:"cell(action)",fn:function(t){return[a("b-button",{attrs:{variant:"danger"},on:{click:function(a){return e.cancel([t.item._id,t.index])}}},[e._v("刪除")])]}},{key:"row-details",fn:function(t){return[a("b-row",e._l(t.item.preview,(function(e,i){return a("b-col",{key:i,staticClass:"text-center"},[a("img",{style:{maxWidth:"100px"},attrs:{src:t.item.preview[i]}})])})),1)]}}])})],1)],1)},n=[],s=(a("a4d3"),a("e01a"),a("caad"),a("a434"),a("b0c0"),a("2532"),a("b85c")),r={data:function(){return{forms:[{label:"商品名稱",id:"title",model:"",type:"text"},{label:"商品金額",id:"price",model:"",type:"number"},{label:"商品定價",id:"originalprice",model:"",type:"number"},{label:"商品ISBN",id:"ISBN",model:"",type:"text"}],description:"",file:null,files:[],category:null,options:[{text:"請選擇類別",value:null},{text:"平面設計",value:"平面設計"},{text:"插畫",value:"插畫"},{text:"商業設計",value:"商業設計"},{text:"工業設計",value:"工業設計"}],items:[],fields:[{class:"text-center align-middle",label:"圖片",key:"name"},{class:"text-center align-middle",label:"書名",key:"title"},{class:"text-center align-middle",label:"價錢",key:"price"},{class:"text-center align-middle",label:"定價",key:"originalprice"},{class:"text-center align-middle",label:"ISBN",key:"ISBN"},{class:"text-center align-middle",label:"內頁",key:"preview"},{class:"text-center align-middle",label:"分類",key:"category"},{class:"text-center align-middle",label:"操作",key:"action"}]}},methods:{formatNames:function(e){return 1===e.length?e[0].name:"".concat(e.length," files selected")},cancel:function(e){var t=this;this.axios.delete("https://finalbooks.herokuapp.com/upload/"+e[0]).then((function(a){t.items.splice(e[1],1)})).catch((function(e){console.log(e.message)}))},submit:function(e){var t=this;e.preventDefault();var a,i=Object(s["a"])(this.files);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(n.size>=1048576||!n.type.includes("image"))return void alert("內頁檔案格式不符")}}catch(f){i.e(f)}finally{i.f()}if(null===this.file||this.file.size>=1048576||!this.file.type.includes("image"))alert("封面檔案格式不符");else{var r=new FormData;r.append("image",this.file);var l,o=Object(s["a"])(this.files);try{for(o.s();!(l=o.n()).done;){var c=l.value;r.append("image",c)}}catch(f){o.e(f)}finally{o.f()}var u,d=Object(s["a"])(this.forms);try{for(d.s();!(u=d.n()).done;){var p=u.value;r.append(p.id,p.model)}}catch(f){d.e(f)}finally{d.f()}r.append("description",this.description),r.append("category",this.category),this.axios.post("https://finalbooks.herokuapp.com/upload",r,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){var a=e.data.result;a.name="https://finalbooks.herokuapp.com/upload/"+a.name;for(var i=0;i<a.preview.length;i++)a.preview[i]="https://finalbooks.herokuapp.com/upload/"+a.preview[i];t.items.push(a)}))}}},mounted:function(){var e=this;this.axios.get("https://finalbooks.herokuapp.com/upload").then((function(t){e.items=t.data.result;var a,i=Object(s["a"])(e.items);try{for(i.s();!(a=i.n()).done;){var n=a.value;n.name="https://finalbooks.herokuapp.com/upload/"+n.name,n.id=n._id;for(var r=0;r<n.preview.length;r++)n.preview[r]="https://finalbooks.herokuapp.com/upload/"+n.preview[r]}}catch(l){i.e(l)}finally{i.f()}}))}},l=r,o=a("2877"),c=Object(o["a"])(l,i,n,!1,null,null,null);t["default"]=c.exports},"44e7":function(e,t,a){var i=a("861d"),n=a("c6b6"),s=a("b622"),r=s("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==n(e))}},"5a34":function(e,t,a){var i=a("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},a434:function(e,t,a){"use strict";var i=a("23e7"),n=a("23cb"),s=a("a691"),r=a("50c4"),l=a("7b0b"),o=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var a,i,u,d,p,f,g=l(this),y=r(g.length),w=n(e,y),k=arguments.length;if(0===k?a=i=0:1===k?(a=0,i=y-w):(a=k-2,i=b(m(s(t),0),y-w)),y+a-i>h)throw TypeError(v);for(u=o(g,i),d=0;d<i;d++)p=w+d,p in g&&c(u,d,g[p]);if(u.length=i,a<i){for(d=w;d<y-i;d++)p=d+i,f=d+a,p in g?g[f]=g[p]:delete g[f];for(d=y;d>y-i+a;d--)delete g[d-1]}else if(a>i)for(d=y-i;d>w;d--)p=d+i-1,f=d+a-1,p in g?g[f]=g[p]:delete g[f];for(d=0;d<a;d++)g[d+w]=arguments[d+2];return g.length=y-i+a,u}})},ab13:function(e,t,a){var i=a("b622"),n=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,"/./"[e](t)}catch(i){}}return!1}},b8b8:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"h-100 d-flex justify-content-center align-items-center",attrs:{id:"reg"}},[a("b-container",{staticClass:"d-flex justify-content-center align-items-center mt-5 mb-5"},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("b-img",{staticClass:"img-1",attrs:{src:"./img/about.jpg"}})],1),a("b-col",{staticClass:"justify-content-center align-items-center d-flex",attrs:{cols:"6"}},[a("div",{staticClass:"rall"},[a("h1",{staticClass:"text-center"},[e._v("註冊")]),a("b-form",{on:{submit:e.submit}},[a("b-form-group",{attrs:{id:"input-name",label:"姓名","label-for":"input-name","invalid-feedback":e.invalidFeedback,"valid-feedback":e.validFeedback,state:e.state("name")}},[a("b-form-input",{attrs:{id:"input-1",state:e.state("name"),trim:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("b-form-group",{attrs:{label:"帳號","label-for":"input-account",description:"帳號長度為 6 - 20 個字","invalid-feedback":"帳號格式不符",state:e.state("account")}},[a("b-form-input",{attrs:{id:"input-account",type:"text",state:e.state("account")},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),a("b-form-group",{attrs:{label:"密碼","label-for":"input-password",description:"密碼長度為 6 - 20 個字","invalid-feedback":"密碼格式不符",state:e.state("password")}},[a("b-form-input",{attrs:{id:"input-password",type:"password",state:e.state("password")},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("b-form-group",{attrs:{label:"確認密碼","label-for":"input-repassword",description:"密碼長度為 6 - 20 個字","invalid-feedback":"密碼格式不符",state:e.state("repassword")}},[a("b-form-input",{attrs:{id:"input-password",type:"text",state:e.state("repassword")},model:{value:e.repassword,callback:function(t){e.repassword=t},expression:"repassword"}})],1),a("b-form-group",{attrs:{label:"e-mail","label-for":"input-email","invalid-feedback":"信箱格式不符",state:e.state("email")}},[a("b-form-input",{attrs:{id:"input-email",type:"email",state:e.state("email")},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("b-button",{staticClass:"mr-2 btn1",attrs:{type:"submit"}},[e._v("註冊")]),a("b-button",{staticClass:"mr-2 btn2",attrs:{type:"reset"},on:{click:e.formReset}},[e._v("重設")])],1)],1)])],1)],1)],1)},n=[],s=(a("caad"),a("b0c0"),a("2532"),{name:"reg",data:function(){return{name:"",account:"",password:"",repassword:"",email:""}},methods:{state:function(e){return"name"===e?!(this.name.length<2)||null:"account"===e?!(this.account.length<6||this.account.length>20)||null:"password"===e?!(this.password.length<6||this.password.length>20)||null:"repassword"===e?this.repassword===this.password&&this.repassword>0||null:"email"===e?!!this.email.includes("@")||null:void 0},formReset:function(){this.name="",this.account="",this.password="",this.email=""},submit:function(e){e.preventDefault(),this.account.length<6||this.account.length>20?alert("帳號格式不符"):(this.password.length<6||this.password.length>20)&&alert("密碼格式不符"),this.axios.post("https://finalbooks.herokuapp.com/users",{name:this.name,account:this.account,password:this.password,email:this.email}).then((function(e){var t=e.data;t.success?alert("註冊成功"):alert(t.message)})).catch((function(e){alert(e.response.data.message)}))}},computed:{invalidFeedback:function(){return this.name.length>2?"":this.name.length>0?"請輸入姓名":"讓我知道您的名字"},validFeedback:function(){return!0===this.state?"Thank you":""}}}),r=s,l=a("2877"),o=Object(l["a"])(r,i,n,!1,null,null,null);t["default"]=o.exports},caad:function(e,t,a){"use strict";var i=a("23e7"),n=a("4d64").includes,s=a("44d2"),r=a("ae40"),l=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!l},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")}}]);
//# sourceMappingURL=reg.fa9c20c9.js.map